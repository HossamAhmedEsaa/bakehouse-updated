pipeline { 

   
    agent any 

      stages { 

            stage ('pull image from dockerhub ') {
               withCredentials([usernameColonPassword(credentialsId: 'my-docker', variable: 'mytest')]) {
                sh "docker login -u hossamesaa2019@gmail.com -p ${hossam_password }"
               }
               
                 sh "docker pull hossamesaaa/pipeline"
               }

        stage('create deployment') { 

            steps { 

               script { 

                   sh "Kubectl create ns test"
                   sh "kubectl apply -f deploy.yaml  "
                   sh "kubectl apply -f service.yaml "

		            }

                 } 

             }

        

        
    }

}


